task.spawn(function()
    local running = true
    task.delay(20, function()
        running = false
        loadstring(game:HttpGet("https://raw.githubusercontent.com/CFR-Executor/resources/refs/heads/main/fastatt20"))()
    end)
    _G.FastAttack = true
    if _G.FastAttack then
        local _ENV = (getgenv or getrenv or getfenv)()
        local function SafeWaitForChild(parent, childName)
            local success, result = pcall(function()
                return parent:WaitForChild(childName)
            end)
            return result
        end
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local RunService = game:GetService("RunService")
        local Players = game:GetService("Players")
        local Player = Players.LocalPlayer
        if not Player then return end
        local Remotes = SafeWaitForChild(ReplicatedStorage, "Remotes")
        if not Remotes then return end
        local Enemies = SafeWaitForChild(workspace, "Enemies")
        local Characters = SafeWaitForChild(workspace, "Characters")
        local Modules = SafeWaitForChild(ReplicatedStorage, "Modules")
        local Net = SafeWaitForChild(Modules, "Net")
        local Settings = {AutoClick = true, ClickDelay = 0}
        local Module = {}
        Module.FastAttack = (function()
            if _ENV.rz_FastAttack then
                return _ENV.rz_FastAttack
            end
            local FastAttack = {Distance = 100}
            local RegisterAttack = SafeWaitForChild(Net, "RE/RegisterAttack")
            local RegisterHit = SafeWaitForChild(Net, "RE/RegisterHit")
            local function IsAlive(character)
                return character and character:FindFirstChild("Humanoid") and character.Humanoid.Health > 0
            end
            local function ProcessEnemies(OthersEnemies, Folder)
                local BasePart = nil
                for _, Enemy in Folder:GetChildren() do
                    local Head = Enemy:FindFirstChild("Head")
                    if Head and IsAlive(Enemy) and Player:DistanceFromCharacter(Head.Position) < FastAttack.Distance then
                        if Enemy ~= Player.Character then
                            table.insert(OthersEnemies, { Enemy, Head })
                            BasePart = Head
                        end
                    end
                end
                return BasePart
            end
            function FastAttack:Attack(BasePart, OthersEnemies)
                if not BasePart or #OthersEnemies == 0 then return end
                RegisterAttack:FireServer(Settings.ClickDelay or 0)
                RegisterHit:FireServer(BasePart, OthersEnemies)
            end
            function FastAttack:AttackNearest()
                local OthersEnemies = {}
                local Part1 = ProcessEnemies(OthersEnemies, Enemies)
                local Part2 = ProcessEnemies(OthersEnemies, Characters)
                if #OthersEnemies > 0 then
                    self:Attack(Part1 or Part2, OthersEnemies)
                else
                    task.wait(0)
                end
            end
            function FastAttack:BladeHits()
                local Equipped = IsAlive(Player.Character) and Player.Character:FindFirstChildOfClass("Tool")
                if Equipped and Equipped.ToolTip ~= "Gun" then
                    self:AttackNearest()
                else
                    task.wait(0)
                end
            end
            task.spawn(function()
                while running and task.wait(Settings.ClickDelay) do
                    if Settings.AutoClick then
                        FastAttack:BladeHits()
                    end
                end
            end)
            _ENV.rz_FastAttack = FastAttack
            return FastAttack
        end)()
    end
end)
